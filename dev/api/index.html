<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · StaticLLVM.jl</title><meta name="title" content="API Reference · StaticLLVM.jl"/><meta property="og:title" content="API Reference · StaticLLVM.jl"/><meta property="twitter:title" content="API Reference · StaticLLVM.jl"/><meta name="description" content="Documentation for StaticLLVM.jl."/><meta property="og:description" content="Documentation for StaticLLVM.jl."/><meta property="twitter:description" content="Documentation for StaticLLVM.jl."/><meta property="og:url" content="https://kylincaster.github.io/StaticLLVM.jl/api/"/><meta property="twitter:url" content="https://kylincaster.github.io/StaticLLVM.jl/api/"/><link rel="canonical" href="https://kylincaster.github.io/StaticLLVM.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StaticLLVM.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/kylincaster/StaticLLVM.jl/blob/main/docs/src/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="StaticLLVM"><a class="docs-heading-anchor" href="#StaticLLVM">StaticLLVM</a><a id="StaticLLVM-1"></a><a class="docs-heading-anchor-permalink" href="#StaticLLVM" title="Permalink"></a></h1><p>Documentation for StaticLLVM</p><ul><li><a href="#StaticLLVM.LLVMBlock"><code>StaticLLVM.LLVMBlock</code></a></li><li><a href="#StaticLLVM.MethodInfo"><code>StaticLLVM.MethodInfo</code></a></li><li><a href="#StaticLLVM.ModVarInfo"><code>StaticLLVM.ModVarInfo</code></a></li><li><a href="#StaticLLVM.ModuleInfo"><code>StaticLLVM.ModuleInfo</code></a></li><li><a href="#StaticLLVM.assemble_modinfo-Tuple{Dict{String, Any}, IdDict{Method, Symbol}, IdDict{UInt64, StaticLLVM.ModVarInfo}}"><code>StaticLLVM.assemble_modinfo</code></a></li><li><a href="#StaticLLVM.build"><code>StaticLLVM.build</code></a></li><li><a href="#StaticLLVM.clean_cache-Tuple{String}"><code>StaticLLVM.clean_cache</code></a></li><li><a href="#StaticLLVM.collect_methods!"><code>StaticLLVM.collect_methods!</code></a></li><li><a href="#StaticLLVM.collect_modvar_pairs-Tuple{Module}"><code>StaticLLVM.collect_modvar_pairs</code></a></li><li><a href="#StaticLLVM.compile_llvm_files-Tuple{Dict}"><code>StaticLLVM.compile_llvm_files</code></a></li><li><a href="#StaticLLVM.dump_llvm_ir-Tuple{StaticLLVM.ModuleInfo, String, Bool}"><code>StaticLLVM.dump_llvm_ir</code></a></li><li><a href="#StaticLLVM.emit_llvm-Tuple{Method}"><code>StaticLLVM.emit_llvm</code></a></li><li><a href="#StaticLLVM.emit_llvm"><code>StaticLLVM.emit_llvm</code></a></li><li><a href="#StaticLLVM.emit_native-Tuple{Method}"><code>StaticLLVM.emit_native</code></a></li><li><a href="#StaticLLVM.emit_native"><code>StaticLLVM.emit_native</code></a></li><li><a href="#StaticLLVM.extract_llvm"><code>StaticLLVM.extract_llvm</code></a></li><li><a href="#StaticLLVM.find_matching_brace"><code>StaticLLVM.find_matching_brace</code></a></li><li><a href="#StaticLLVM.get_arg_types-Tuple{Method}"><code>StaticLLVM.get_arg_types</code></a></li><li><a href="#StaticLLVM.get_config-Tuple{}"><code>StaticLLVM.get_config</code></a></li><li><a href="#StaticLLVM.get_mod_filepath-Tuple{Module}"><code>StaticLLVM.get_mod_filepath</code></a></li><li><a href="#StaticLLVM.is_static_code-Tuple{String}"><code>StaticLLVM.is_static_code</code></a></li><li><a href="#StaticLLVM.load_pkg-Tuple{Dict{String, Any}}"><code>StaticLLVM.load_pkg</code></a></li><li><a href="#StaticLLVM.make_modvar_def-Union{Tuple{T}, Tuple{T, Bool}} where T"><code>StaticLLVM.make_modvar_def</code></a></li><li><a href="#StaticLLVM.patch_memory_alloc!-Tuple{StaticLLVM.LLVMBlock, Vector{Pair{SubString{String}, UInt64}}}"><code>StaticLLVM.patch_memory_alloc!</code></a></li><li><a href="#StaticLLVM.patch_memory_instance!-Tuple{IdDict{Symbol, StaticLLVM.LLVMBlock}, StaticLLVM.LLVMBlock}"><code>StaticLLVM.patch_memory_instance!</code></a></li><li><a href="#StaticLLVM.pyprint-Tuple"><code>StaticLLVM.pyprint</code></a></li><li><a href="#StaticLLVM.recover_heap_object-Tuple{Ptr}"><code>StaticLLVM.recover_heap_object</code></a></li><li><a href="#StaticLLVM.recover_heap_object-Tuple{Integer}"><code>StaticLLVM.recover_heap_object</code></a></li><li><a href="#StaticLLVM.remove_memoryref_calls-Tuple{StaticLLVM.LLVMBlock}"><code>StaticLLVM.remove_memoryref_calls</code></a></li><li><a href="#StaticLLVM.remove_substrings-Tuple{AbstractString, Vector{Tuple{Int64, Int64}}}"><code>StaticLLVM.remove_substrings</code></a></li><li><a href="#StaticLLVM.replace_memory_alloc-Tuple{StaticLLVM.MethodInfo}"><code>StaticLLVM.replace_memory_alloc</code></a></li><li><a href="#StaticLLVM.run_command-Tuple{Cmd}"><code>StaticLLVM.run_command</code></a></li><li><a href="#StaticLLVM.split_blocks-Tuple{AbstractString}"><code>StaticLLVM.split_blocks</code></a></li><li><a href="#StaticLLVM.strip_comments-Tuple{String}"><code>StaticLLVM.strip_comments</code></a></li><li><a href="#StaticLLVM.strip_gc_allocations-Tuple{String}"><code>StaticLLVM.strip_gc_allocations</code></a></li><li><a href="#StaticLLVM.write_if_changed-Tuple{String, String, Bool}"><code>StaticLLVM.write_if_changed</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.LLVMBlock" href="#StaticLLVM.LLVMBlock"><code>StaticLLVM.LLVMBlock</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LLVMBlock(lable::Symbol, index::Int, ir::SubString{String})</code></pre><p>Represents a basic block in LLVM IR with its label, index (order), and IR body.</p><ul><li><code>label::Symbol</code>:Identifier for the LLVM IR block, e.g. <code>:entry</code>, <code>:L3</code>, etc.  </li><li><code>index::Int</code>: The order of block in LLVM IR function.</li><li><code>ir::SubString{String}</code>: A substring view of the whole block.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L28-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.MethodInfo" href="#StaticLLVM.MethodInfo"><code>StaticLLVM.MethodInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MethodInfo(m::Core.Method)
MethodInfo(m::Core.Method, name::Symbol())</code></pre><p>A mutable struct that stores metadata and compiled LLVM IR information for a specific Julia method.</p><p><strong>Fields</strong></p><ul><li><code>name::Symbol</code>: A user-friendly name for the method. Defaults to the mangled name if not provided.</li><li><code>mangled::Symbol</code>: The internal compiler name of the method, used for LLVM IR lookup.</li><li><code>arg_types::Tuple</code>: A tuple of argument types (excluding the function type), derived from the method signature.</li><li><code>method::Core.Method</code>: The original Julia <code>Method</code> object</li><li><code>llvm_ir::String</code>: The LLVM IR code generated for the method, extracted as a string.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L31-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.ModVarInfo" href="#StaticLLVM.ModVarInfo"><code>StaticLLVM.ModVarInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ModVarInfo(name::String, mod::Module, mangled::String, llvm_def::String, llvm_decl::String)</code></pre><p>Holds metadata for a module-level mutable variable (<code>ModVar</code>):</p><ul><li><code>name::Symbol</code>        : Julia binding name</li><li><code>file::Symbol</code>        : file of mod-vars</li><li><code>mangled::String</code>     : LLVM mangled global name</li><li><code>llvm_def::String</code>    : LLVM IR global variable definition</li><li><code>llvm_decl::String</code>   : LLVM IR external declaration</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.ModuleInfo" href="#StaticLLVM.ModuleInfo"><code>StaticLLVM.ModuleInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ModuleInfo</code></pre><p>Stores metadata associated with a Julia <code>Module</code>, including referenced methods and  global module-level variables.</p><p><strong>Fields</strong></p><ul><li><code>mod::Module</code>: The Julia module this information is associated with.</li><li><code>mangled::String</code>: The mangled name of the module, following the Itanium C++ ABI</li><li><code>modvars::IdSet{ModVarInfo}</code>: A set of global static variables (<code>ModVarInfo</code>) used in this module. Identity-based (<code>IdSet</code>) to ensure uniqueness by object reference.</li><li><code>methods::Vector{MethodInfo}</code>: A list of methods (<code>MethodInfo</code>) defined or referenced within this module.</li></ul><p><strong>Usage</strong></p><p><code>ModuleInfo</code> is typically constructed internally during code analysis or code generation workflows to track both method definitions and global state referenced by a module.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L226-L242">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.assemble_modinfo-Tuple{Dict{String, Any}, IdDict{Method, Symbol}, IdDict{UInt64, StaticLLVM.ModVarInfo}}" href="#StaticLLVM.assemble_modinfo-Tuple{Dict{String, Any}, IdDict{Method, Symbol}, IdDict{UInt64, StaticLLVM.ModVarInfo}}"><code>StaticLLVM.assemble_modinfo</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">assemble_modinfo(config::Dict{String,Any}, method_map::IdDict{Core.Method,Symbol}, modvar_map::IdDict{UInt,ModVarInfo}, check_ir::Bool = true) -&gt; IdDict{Module, ModuleInfo}</code></pre><p>Constructs <code>ModuleInfo</code> objects that capture method-level (<code>MethodInfo</code>) and global variable (<code>ModVarInfo</code>) metadata within each Julia module.</p><p>Each entry in <code>method_map</code> is processed to generate a <code>MethodInfo</code> object containing LLVM IR and related properties.  Similarly, each global variable entry in <code>modvar_map</code> is assigned to the appropriate module. </p><p><strong>Arguments</strong></p><ul><li><code>config::Dict{String,Any}</code>: Configuration dictionary. Must include keys like <code>&quot;debug&quot;</code> and <code>&quot;policy&quot;</code>, controlling diagnostics and symbol filtering.</li><li><code>method_map::IdDict{Core.Method,Symbol}</code>: Maps Julia <code>Method</code> objects to their LLVM mangled symbol names.</li><li><code>modvar_map::IdDict{UInt,ModVarInfo}</code>: Maps raw pointer addresses (as <code>UInt</code>) to their corresponding global variable metadata.</li></ul><p><strong>LLVM IR policy Behavior</strong></p><ul><li><code>:warn</code>: Emits a warning if non-static LLVM IR is found.</li><li><code>:strict</code>: Throws an error.</li><li><code>:strip</code>: Attempts to strip the specific GC-related IR allocations</li><li><code>:strip_all</code>: Attempts to strip all GC-related IR allocations.</li></ul><p><strong>Returns</strong></p><ul><li>An <code>IdDict{Module, ModuleInfo}</code> mapping each involved Julia <code>Module</code> to its assembled <code>ModuleInfo</code> representation, including static methods and module-level variables.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L319-L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.build" href="#StaticLLVM.build"><code>StaticLLVM.build</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build(mod::Module=Main, config::Dict=default_config())</code></pre><p>Main build process:</p><ul><li>Parse arguments if called from <code>Main</code>.</li><li>Collect global variables and method info.</li><li>Dump LLVM IR files.</li><li>Optionally compile with clang.</li></ul><p><strong>Arguments</strong></p><ul><li><code>mod</code>: The module to process (defaults to <code>Main</code>).</li><li><code>config</code>: Build configuration dictionary.</li></ul><p><strong>Supported compile modes:</strong></p><ul><li><code>:none</code> – Just generate IR</li><li><code>:onefile</code> – Compile all IR into a single binary</li><li><code>:makefile</code> – (Not implemented)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L233-L250">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.clean_cache-Tuple{String}" href="#StaticLLVM.clean_cache-Tuple{String}"><code>StaticLLVM.clean_cache</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">clean_cache(path::String)</code></pre><p>Delete cached build files (e.g., .o, .so, .dll, .lib, .a, .dylib) under the given directory. This is useful for cleaning intermediate or compiled files before a fresh build.</p><p><strong>Arguments</strong></p><ul><li><code>path</code>: Directory where cache files are stored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L41-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.collect_methods!" href="#StaticLLVM.collect_methods!"><code>StaticLLVM.collect_methods!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">collect_methods!(name_map::IdDict{Method, Symbol}, method::Method)</code></pre><p>Recursively collect methods starting from <code>method</code>, ensuring all are precompiled and mapped to mangled names. This function avoids use of global state by requiring an explicit name map to be passed in.</p><p><strong>Arguments</strong></p><ul><li><code>method::Method</code>: The starting method to process.</li><li><code>name_map::IdDict{Method, Symbol}</code>: A dictionary to store original methods and their original names.</li></ul><p><strong>Behavior</strong></p><ul><li>Ensures the method is precompiled.</li><li>Stores a mapping from the method to its mangled name.</li><li>Recursively processes <code>Core.MethodInstance</code> objects found in <code>method.roots</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L183-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.collect_modvar_pairs-Tuple{Module}" href="#StaticLLVM.collect_modvar_pairs-Tuple{Module}"><code>StaticLLVM.collect_modvar_pairs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">collect_modvars(mod::Module) -&gt; Vector{Tuple{Int, ModVarInfo}}</code></pre><p>Recursively collects all mutable, constant global variables defined in a Julia module <code>mod</code>  (excluding functions, types, and strings), and returns a list of <code>(pointer, ModVarInfo)</code> pairs.</p><p>Each <code>ModVarInfo</code> contains:</p><ul><li>the original symbol name</li><li>the module it belongs to</li><li>its mangled LLVM symbol name</li><li>its LLVM IR definition and declaration</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L123-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.compile_llvm_files-Tuple{Dict}" href="#StaticLLVM.compile_llvm_files-Tuple{Dict}"><code>StaticLLVM.compile_llvm_files</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compile_llvm_files(config::Dict)</code></pre><p>Compile all LLVM IR files in a specified directory into a single output binary.</p><p><strong>Expected keys in <code>config</code>:</strong></p><ul><li><code>&quot;module&quot;</code>: Name of the output executable.</li><li><code>&quot;dir&quot;</code>: Directory containing <code>.ll</code> files.</li><li><code>&quot;clang&quot;</code>: Path to <code>clang</code> compiler.</li><li><code>&quot;cflag&quot;</code>: Compiler flags (as a single string, e.g. &quot;-O2 -flto&quot;).</li></ul><p>Prints status messages and compilation result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L140-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.dump_llvm_ir-Tuple{StaticLLVM.ModuleInfo, String, Bool}" href="#StaticLLVM.dump_llvm_ir-Tuple{StaticLLVM.ModuleInfo, String, Bool}"><code>StaticLLVM.dump_llvm_ir</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dump_llvm_ir(modinfo::ModuleInfo, output_dir::String, check::Bool)</code></pre><p>Write LLVM IR files for a given <code>ModuleInfo</code> instance.</p><ul><li>Writes the IR of static module variables into one file named after the module.</li><li>Writes the IR for each method individually into separate files.</li><li>Skips writing files if content is unchanged (if <code>check</code> is true).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L488-L495">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.emit_llvm" href="#StaticLLVM.emit_llvm"><code>StaticLLVM.emit_llvm</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">emit_llvm(fn::Function, args::Union{Tuple, Nothing}=nothing; clean::Bool=true, dump::Bool=true) -&gt; String</code></pre><p>Generate LLVM IR for a specific method of a Julia function specialized on given argument types.</p><p><strong>Arguments</strong></p><ul><li><code>fn</code>: Julia function whose LLVM IR is requested.</li><li><code>args</code>: Tuple of argument types specifying the method specialization;          if <code>nothing</code>, expect exactly one method for <code>fn</code>.</li><li><code>clean</code>: Remove extraneous comments and optionally add header if true (default: true).</li><li><code>dump</code>: Include full LLVM module in output if true (default: true).</li></ul><p><strong>Returns</strong></p><ul><li>LLVM IR string of the matched method, optionally cleaned.</li></ul><p><strong>Behavior</strong></p><ul><li>If <code>args</code> is provided, use <code>which</code> to find the exact method.</li><li>If <code>args</code> is <code>nothing</code>, expect <code>fn</code> to have exactly one method, or throw an error.</li><li>Delegates actual IR emission to another <code>emit_llvm</code> method accepting a <code>Method</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">ir = emit_llvm(sin, (Float64,); clean=true, dump=false)
println(ir)

add(x::Int) = x + 1
ir = emit_llvm(add)
println(ir)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L213-L242">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.emit_llvm-Tuple{Method}" href="#StaticLLVM.emit_llvm-Tuple{Method}"><code>StaticLLVM.emit_llvm</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">emit_llvm(method::Core.Method; clean::Bool=true, dump::Bool=true) -&gt; String</code></pre><p>Generate the LLVM IR for a given Julia method.</p><p><strong>Arguments</strong></p><ul><li><code>method</code>: The <code>Core.Method</code> object to generate LLVM IR for.</li><li><code>clean</code>: If <code>true</code>, strip comments and optionally prepend a header comment. Default is <code>true</code>.</li><li><code>dump</code>: If <code>true</code>, include the full LLVM module in the output. Default is <code>true</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A string containing the LLVM IR of the method. When <code>clean</code> is <code>true</code>, comments are stripped.</li></ul><p><strong>Details</strong></p><ul><li>Extracts the function instance and argument types from the method signature.</li><li>Uses <code>InteractiveUtils.code_llvm</code> to get the LLVM IR as a string.</li><li>Optionally cleans the IR by removing comments using <code>strip_comments</code>.</li><li>When cleaning, adds the method signature as a header comment.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">ir = emit_llvm(my_method, clean=true, dump=false)
println(ir)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L175-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.emit_native" href="#StaticLLVM.emit_native"><code>StaticLLVM.emit_native</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">emit_native(fn::Function, args::Union{Tuple, Nothing}=nothing; clean::Bool=true, dump::Bool=true) -&gt; String</code></pre><p>Generate native LLVM assembly for a specific method of a Julia function given argument types.</p><p><strong>Arguments</strong></p><ul><li><code>fn</code>: Julia function whose LLVM IR is requested.</li><li><code>args</code>: Tuple of argument types specifying the method specialization;          if <code>nothing</code>, expect exactly one method for <code>fn</code>.</li><li><code>clean</code>: Remove extraneous comments and optionally add header if true (default: true).</li><li><code>dump</code>: Include full LLVM module in output if true (default: true).</li></ul><p><strong>Returns</strong></p><ul><li>A string containing the native LLVM assembly code.</li><li>When <code>clean</code> is <code>true</code>, comments and debug info are removed.</li></ul><p><strong>Behavior</strong></p><ul><li>If <code>args</code> is provided, use <code>which</code> to find the exact method.</li><li>If <code>args</code> is <code>nothing</code>, expect <code>fn</code> to have exactly one method, or throw an error.</li><li>Delegates actual IR emission to another <code>emit_llvm</code> method accepting a <code>Method</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">ir = emit_native(sin, (Float64,); clean=true, dump=false)
println(ir)

add(x::Int) = x + 1
ir = emit_native(add)
println(ir)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L289-L319">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.emit_native-Tuple{Method}" href="#StaticLLVM.emit_native-Tuple{Method}"><code>StaticLLVM.emit_native</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">emit_native(method::Core.Method; clean::Bool=true, dump::Bool=true) -&gt; String</code></pre><p>Generate the native LLVM bitcode (assembly) for a given Julia method.</p><p><strong>Arguments</strong></p><ul><li><code>method</code>: The <code>Core.Method</code> to generate native code for.</li><li><code>clean</code>: If <code>true</code>, remove comments and debug info from the output. Default is <code>true</code>.</li><li><code>dump</code>: If <code>true</code>, include the full module dump. Default is <code>true</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A string containing the native LLVM assembly code.</li><li>When <code>clean</code> is <code>true</code>, comments and debug info are removed.</li></ul><p><strong>Details</strong></p><ul><li>Extracts the function instance and argument types from the method signature.</li><li>Calls <code>InteractiveUtils.code_native</code> to get native LLVM assembly.</li><li>Controls debug info level: <code>:none</code> if clean, otherwise <code>:default</code>.</li><li>Optionally cleans the output by stripping comments.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">native_ir = emit_native(my_method, clean=true, dump=false)
println(native_ir)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L254-L279">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.extract_llvm" href="#StaticLLVM.extract_llvm"><code>StaticLLVM.extract_llvm</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_llvm(method::Core.Method, ir::String; main::Bool=false) -&gt; String</code></pre><p>Extract and clean up the LLVM IR of a single Julia-compiled function from the full IR string <code>ir</code>.</p><p><strong>Arguments</strong></p><ul><li><code>method::Core.Method</code>: The Julia method to locate in the LLVM IR.</li><li><code>ir::String</code>: The full LLVM IR text to search within.</li><li><code>main::Bool=false</code>: If true, rename the function to <code>@main</code>, otherwise use the Julia function name.</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: A cleaned and rewritten IR block for the requested function, including global constants and necessary declarations.</li></ul><p><strong>Notes</strong></p><ul><li>Handles name mangling in <code>@julia_&lt;funcname&gt;_&lt;id&gt;</code> style.</li><li>Rewrites global constant names for uniqueness.</li><li>Gathers required <code>declare</code> lines and LLVM attributes for external linkage.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/extract.jl#L58-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.find_matching_brace" href="#StaticLLVM.find_matching_brace"><code>StaticLLVM.find_matching_brace</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_matching_brace(s::String, start_pos::Int=1) -&gt; Int</code></pre><p>Finds the index of the closing brace &#39;}&#39; that matches the first opening brace &#39;{&#39;  found at or after <code>start_pos</code> in the string <code>s</code>.</p><p>Returns the index of the matching closing brace, or -1 if:</p><ul><li>No opening brace is found at or after <code>start_pos</code>, or</li><li>Braces are unbalanced and a match can&#39;t be found.</li></ul><p><strong>Arguments</strong></p><ul><li><code>s</code>: The input string to search.</li><li><code>start_pos</code>: The position in the string to start searching from (1-based). Defaults to 1.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">find_matching_brace(&quot;a{b{c}d}e&quot;)  # returns 9
find_matching_brace(&quot;abc&quot;, 1)     # returns -1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L78-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.get_arg_types-Tuple{Method}" href="#StaticLLVM.get_arg_types-Tuple{Method}"><code>StaticLLVM.get_arg_types</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_arg_types(m::Core.Method) -&gt; Tuple</code></pre><p>Extracts the argument types (excluding the function itself) from the method&#39;s signature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/extract.jl#L250-L254">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.get_config-Tuple{}" href="#StaticLLVM.get_config-Tuple{}"><code>StaticLLVM.get_config</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_config(; kwargs...) -&gt; Dict{String, Any}</code></pre><p>Return a copy of the default config, with optional keyword overrides.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.get_mod_filepath-Tuple{Module}" href="#StaticLLVM.get_mod_filepath-Tuple{Module}"><code>StaticLLVM.get_mod_filepath</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_mod_filepath(mod::Module) -&gt; Symbol</code></pre><p>Retrieve the source file path symbol where the given module <code>mod</code> is defined.</p><p><strong>Arguments</strong></p><ul><li><code>mod::Module</code> : The Julia module to inspect.</li></ul><p><strong>Returns</strong></p><ul><li><code>Symbol</code> : The source file path as a Symbol if found.</li></ul><p><strong>Behavior</strong></p><ol><li>Checks if the module has a special field <code>:_source_file_</code> and returns it if present.</li><li>Otherwise, scans module names (excluding some built-ins) to find a function defined solely in this module and returns the file path of that function&#39;s method.</li><li>Throws an error if no suitable source file path is found.</li></ol><p><strong>Notes</strong></p><ul><li>Skips imported names and private names starting with <code>#</code>.</li><li>Excludes names like <code>:eval</code> and <code>:include</code> to avoid common standard functions.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L355-L375">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.is_static_code-Tuple{String}" href="#StaticLLVM.is_static_code-Tuple{String}"><code>StaticLLVM.is_static_code</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_static_code(ir::String)::Bool</code></pre><p>Determines whether the given LLVM IR string is &quot;static&quot;, i.e., free from dynamic symbols or Julia internal functions.</p><p><strong>Returns</strong></p><ul><li><code>true</code> if the IR contains no known dynamic patterns.</li><li><code>false</code> if any non-static signature (like <code>@ijl_</code>) is found.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L448-L456">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.load_pkg-Tuple{Dict{String, Any}}" href="#StaticLLVM.load_pkg-Tuple{Dict{String, Any}}"><code>StaticLLVM.load_pkg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_pkg() -&gt; Module</code></pre><p>Load a Julia package or source file specified by the first command-line argument (<code>ARGS[1]</code>).</p><p><strong>Behavior</strong></p><ul><li>If <code>ARGS[1]</code> is a file path, includes the file and extracts the package name from the filename.</li><li>Otherwise, attempts to <code>import</code> the package by name.</li><li>If import fails and a directory with the package name exists, tries to include the source file under <code>./&lt;package&gt;/src/&lt;package&gt;</code>.</li><li>Raises an error if the package cannot be found or loaded.</li><li>Optionally, uses <code>ARGS[2]</code> as the module name to return; defaults to the package name.</li></ul><p><strong>Returns</strong></p><ul><li>The loaded Julia module.</li></ul><p><strong>Notes</strong></p><ul><li>Depends on global <code>ARGS</code> array (command line arguments).</li><li>Prints status messages indicating loading steps.</li></ul><p><strong>Example</strong></p><p>```bash julia script.jl MyPackage OptionalModuleName</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L177-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.make_modvar_def-Union{Tuple{T}, Tuple{T, Bool}} where T" href="#StaticLLVM.make_modvar_def-Union{Tuple{T}, Tuple{T, Bool}} where T"><code>StaticLLVM.make_modvar_def</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_modvar_def(name::String, value::T, is_const::Bool = false) -&gt; (String, String)</code></pre><p>Generate LLVM IR global variable definition and external declaration strings for a Julia module variable.</p><ul><li><code>name</code>: The variable name to be used in LLVM IR (as <code>@name</code>).</li><li><code>value</code>: The Julia module variable value to represent.</li><li><code>is_const</code>: If true, the LLVM global is marked <code>constant</code>; otherwise, it&#39;s mutable (<code>global</code>).</li></ul><p>Returns a tuple <code>(definition::String, declaration::String)</code> where:</p><ul><li><code>definition</code> is the LLVM IR global definition string with initialization.</li><li><code>declaration</code> is the LLVM IR external global declaration string.</li></ul><p>Supported Julia types for <code>value</code>:</p><ul><li>Floating point: Float64, Float32</li><li>Integer types: Int8, Int16, Int32, Int64, Int128 and unsigned equivalents</li><li>Bool</li><li>Ptr types</li><li>String</li><li>Immutable bitstypes (non-primitive)</li></ul><p>Throws an error if the type is unsupported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/extract.jl#L259-L281">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.patch_memory_alloc!-Tuple{StaticLLVM.LLVMBlock, Vector{Pair{SubString{String}, UInt64}}}" href="#StaticLLVM.patch_memory_alloc!-Tuple{StaticLLVM.LLVMBlock, Vector{Pair{SubString{String}, UInt64}}}"><code>StaticLLVM.patch_memory_alloc!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">patch_memory_alloc!(block::LLVMBlock, type_map::Vector{Pair{String, Int}}) -&gt; Bool</code></pre><p>Replaces the LLVM IR code that performs allocation via <code>jl_alloc_genericmemory</code> with explicit <code>malloc</code> or <code>calloc</code> instructions, based on whether the allocated type is mutable or abstract.</p><p><strong>Arguments</strong></p><ul><li><code>block</code>: An <code>LLVMBlock</code> containing the IR code.</li><li><code>type_map</code>: A list of <code>Pair{String, Int}</code>, mapping type IDs (e.g., <code>&quot;GenericMemory#1222&quot;</code>)  to an integer flag (0 = mutable/abstract, 1 = concrete/immutable).</li></ul><p><strong>Returns</strong></p><ul><li><code>true</code> if the replacement occurred, <code>false</code> otherwise.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/generic_memory.jl#L70-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.patch_memory_instance!-Tuple{IdDict{Symbol, StaticLLVM.LLVMBlock}, StaticLLVM.LLVMBlock}" href="#StaticLLVM.patch_memory_instance!-Tuple{IdDict{Symbol, StaticLLVM.LLVMBlock}, StaticLLVM.LLVMBlock}"><code>StaticLLVM.patch_memory_instance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">patch_memory_instance!(blocks_map::Dict{Symbol, LLVMBlock}, block::LLVMBlock) -&gt; Bool</code></pre><p>Patch the LLVM IR of a block to replace a specific <code>Core.GenericMemory</code> atomic load instruction and simplify its associated conditional branch logic.</p><p><strong>Arguments</strong></p><ul><li><code>blocks_map</code>: A dictionary mapping basic block names (as <code>Symbol</code>) to <code>LLVMBlock</code> objects.</li><li><code>block</code>: The LLVM block whose IR may contain a <code>Core.GenericMemory</code> load instruction.</li></ul><p><strong>Returns</strong></p><ul><li><code>true</code> if the block was modified, <code>false</code> otherwise.</li></ul><p><strong>Description</strong></p><p>This function searches for a specific pattern in the LLVM IR indicating the use of a  hard-coded atomic <code>load</code> from <code>Core.GenericMemory#&lt;id&gt;.jit</code>. If found, the instruction is replaced with a cast from a globally defined pointer <code>@GenericMemoryInstance</code>. The jump logic immediately following the load is also simplified to jump unconditionally to the &quot;success&quot; label.</p><p>This is a low-level IR patching utility meant to canonicalize memory access logic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/generic_memory.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.pyprint-Tuple" href="#StaticLLVM.pyprint-Tuple"><code>StaticLLVM.pyprint</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pyprint(args...; sep=&quot; &quot;, tail=&quot;</code></pre><p>&quot;)</p><p>Print multiple arguments joined by a separator and ending with a specified tail string.</p><p><strong>Arguments</strong></p><ul><li><code>args...</code>: A variable number of arguments to be printed.</li><li><code>sep</code>: Separator string inserted between arguments. Default is a single space <code>&quot; &quot;</code>.</li><li><code>tail</code>: String appended at the end of the output. Default is newline `&quot;</li></ul><p>&quot;`.</p><p><strong>Behavior</strong></p><ul><li>Converts all arguments to strings.</li><li>Joins them with the separator.</li><li>Prints the resulting string followed by the tail string.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">pyprint(&quot;Hello&quot;, &quot;world&quot;, 123; sep=&quot;, &quot;, tail=&quot;!
&quot;)
# Output: Hello, world, 123!</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L2-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.recover_heap_object-Tuple{Integer}" href="#StaticLLVM.recover_heap_object-Tuple{Integer}"><code>StaticLLVM.recover_heap_object</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">recover_heap_object(addr::Integer) -&gt; Any</code></pre><p>Given a raw address (e.g. from <code>pointer_from_objref</code>), attempts to reconstruct the original Julia object stored at that memory location.</p><p>This function inspects the memory layout:</p><ul><li>If the tag indicates a <code>String</code>, reconstruct it.</li><li>If the tag seems to point to a valid heap-allocated <code>DataType</code>, rehydrate the object.</li></ul><p>Returns <code>nothing</code> if the tag is not recognizable or unsupported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L281-L291">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.recover_heap_object-Tuple{Ptr}" href="#StaticLLVM.recover_heap_object-Tuple{Ptr}"><code>StaticLLVM.recover_heap_object</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">recover_heap_object(p::Ptr) -&gt; Any</code></pre><p>Low-level internal logic to reconstruct a Julia object from a raw pointer <code>p</code>. This inspects the memory tag to determine the type of the object.</p><p>Used internally by <code>recover_heap_object</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L296-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.remove_memoryref_calls-Tuple{StaticLLVM.LLVMBlock}" href="#StaticLLVM.remove_memoryref_calls-Tuple{StaticLLVM.LLVMBlock}"><code>StaticLLVM.remove_memoryref_calls</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">remove_memoryref_calls(block::LLVMBlock) -&gt; Bool</code></pre><p>Scans the LLVM IR in <code>block</code> and removes all lines that match calls to <code>@memoryref</code>. Returns <code>true</code> if any modifications were made.</p><p><strong>Arguments</strong></p><ul><li><code>block</code>: The <code>LLVMBlock</code> to process.</li></ul><p><strong>Returns</strong></p><ul><li><code>true</code> if the block&#39;s IR was modified, <code>false</code> otherwise.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/generic_memory.jl#L161-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.remove_substrings-Tuple{AbstractString, Vector{Tuple{Int64, Int64}}}" href="#StaticLLVM.remove_substrings-Tuple{AbstractString, Vector{Tuple{Int64, Int64}}}"><code>StaticLLVM.remove_substrings</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">remove_substrings(input_str::AbstractString, ranges::Vector{Tuple{Int, Int}}) -&gt; String</code></pre><p>Removes substrings from <code>input_str</code> specified by the list of <code>ranges</code>.</p><p><strong>Arguments</strong></p><ul><li><code>input_str</code>: The original string.</li><li><code>ranges</code>: A vector of <code>(start, stop)</code> index tuples indicating substrings to remove.</li></ul><p><strong>Returns</strong></p><ul><li>A new string with the specified substrings removed.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">remove_substrings(&quot;Hello, world!&quot;, [(1,5), (8,8)]) # returns &quot;, orld!&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/generic_memory.jl#L127-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.replace_memory_alloc-Tuple{StaticLLVM.MethodInfo}" href="#StaticLLVM.replace_memory_alloc-Tuple{StaticLLVM.MethodInfo}"><code>StaticLLVM.replace_memory_alloc</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">replace_memory_alloc(method::MethodInfo)</code></pre><p>Scans and patches LLVM IR in the given <code>method</code> to replace  allocations related to <code>Core.GenericMemory</code>. </p><p>This function:</p><ul><li>Extracts memory layout sizes for GenericMemory types from method metadata.</li><li>Iterates over all LLVM functions in the method, splits them into blocks.</li><li>For each block, attempts to patch GenericMemory instances and allocations, and removes calls to <code>@memoryref</code>.</li><li>Finally updates the LLVM IR in the method with the patched blocks.</li></ul><p><strong>Arguments</strong></p><ul><li><code>method</code>: A <code>MethodInfo</code> struct containing LLVM IR and metadata.</li></ul><p><strong>Notes</strong></p><ul><li>Relies on low-level unsafe pointer operations to inspect Julia internal data.</li><li>Emits a warning if element size exceeds 256 bytes.</li><li>Throws an error if no GenericMemory alias is found.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/generic_memory.jl#L184-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.run_command-Tuple{Cmd}" href="#StaticLLVM.run_command-Tuple{Cmd}"><code>StaticLLVM.run_command</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run_command(cmd::Cmd; verbose::Bool=false) -&gt; NamedTuple</code></pre><p>Run the given command and capture its output.</p><p><strong>Arguments</strong></p><ul><li><code>cmd</code>: A <code>Cmd</code> object representing the system command to execute.</li><li><code>verbose</code>: If true, prints the command before execution.</li></ul><p><strong>Returns</strong></p><p>A named tuple <code>(success, code, output)</code>:</p><ul><li><code>success</code>: <code>true</code> if the command succeeded, <code>false</code> otherwise.</li><li><code>code</code>: Exit code (0 if success, -1 if error caught).</li><li><code>output</code>: Command output or error message as a string.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/StaticLLVM.jl#L115-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.split_blocks-Tuple{AbstractString}" href="#StaticLLVM.split_blocks-Tuple{AbstractString}"><code>StaticLLVM.split_blocks</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">split_blocks(ir::AbstractString) -&gt; Vector{LLVMBlock}</code></pre><p>Splits a full LLVM IR string into a list of <code>LLVMBlock</code> objects, based on labeled basic blocks (e.g., <code>entry:</code>, <code>L3:</code>).</p><p><strong>Arguments</strong></p><ul><li><code>ir</code>: A string containing LLVM IR code.</li></ul><p><strong>Returns</strong></p><ul><li>A vector of <code>LLVMBlock</code> objects, each representing a labeled block of IR code.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">blocks = split_blocks(ir_string)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L43-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.strip_comments-Tuple{String}" href="#StaticLLVM.strip_comments-Tuple{String}"><code>StaticLLVM.strip_comments</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strip_comments(ir::String) -&gt; String</code></pre><p>Removes comments and trailing whitespace from LLVM IR code lines, while preserving  leading indentation and empty lines with no code content.</p><p><strong>Arguments</strong></p><ul><li><code>ir</code>: A multiline string containing LLVM IR code.</li></ul><p><strong>Returns</strong></p><ul><li>A new string where each line has comments (starting with <code>;</code>) and trailing spaces removed.</li><li>Lines that contain only whitespace or comments are omitted.</li></ul><p><strong>Details</strong></p><ul><li>The function splits the input text into lines.</li><li>For each line, it finds the first comment delimiter <code>;</code>.</li><li>It keeps only the part of the line before the comment.</li><li>Trailing whitespace is trimmed, but leading whitespace (indentation) is preserved.</li><li>Empty or whitespace-only lines after stripping are skipped.</li><li>The resulting lines are joined back with newline characters.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">code = &quot;&quot;&quot;
define i32 @main() {
  %1 = add i32 1, 2 ; addition
  ret i32 %1 ; return value
}
&quot;&quot;&quot;
println(strip_comments(code))
# Output:
# define i32 @main() {
#   %1 = add i32 1, 2
#   ret i32 %1
# }</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/utils.jl#L120-L156">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.strip_gc_allocations-Tuple{String}" href="#StaticLLVM.strip_gc_allocations-Tuple{String}"><code>StaticLLVM.strip_gc_allocations</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strip_gc_allocations(ir::String)::String</code></pre><p>Clean up Julia IR by removing GC-related stack management and replacing <code>@ijl_gc_pool_alloc_instrumented</code> calls with standard <code>malloc</code> calls for further IR-level optimization or analysis.</p><p><strong>Arguments</strong></p><ul><li><code>ir::String</code>: The input LLVM IR string generated by Julia.</li></ul><p><strong>Returns</strong></p><ul><li>A cleaned-up IR string with GC stack frames and pool allocation calls removed or replaced.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/extract.jl#L177-L188">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StaticLLVM.write_if_changed-Tuple{String, String, Bool}" href="#StaticLLVM.write_if_changed-Tuple{String, String, Bool}"><code>StaticLLVM.write_if_changed</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write_if_changed(filepath::String, content::String, check::Bool)::Int</code></pre><p>Writes <code>content</code> to <code>filepath</code> only if the file content has changed or doesn&#39;t exist. If <code>check</code> is false, no writing occurs.</p><p><strong>Returns</strong></p><ul><li>1 if the file was written (or would be written).</li><li>0 if no writing was done due to <code>check == false</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kylincaster/StaticLLVM.jl/blob/c03da75865964080cbac70541e7b8884c7dfe6f0/src/meta.jl#L423-L432">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Tuesday 10 June 2025 05:04">Tuesday 10 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
